plugins {
    id 'org.jetbrains.intellij' version '1.16.0'
    id 'org.jetbrains.kotlin.jvm' version '1.6.21'
}

repositories {
    mavenCentral()
}

sourceSets {
    main {
        kotlin.srcDirs './src'
        resources.srcDirs './resources'
    }
    test {
        kotlin.srcDirs './test'
    }
}

compileKotlin {
    kotlinOptions {
        jvmTarget = '11'
        apiVersion = '1.6'
        languageVersion = '1.6'
        // Compiler flag to allow building against pre-released versions of Kotlin
        // because IJ EAP can be built using pre-released Kotlin but it's still worth doing to check API compatibility
        freeCompilerArgs += ['-Xskip-metadata-version-check']
    }
}

intellij {
    version = "212.4746.92" // with kotlin 1.5.10 support
    // version "LATEST-EAP-SNAPSHOT"
    pluginName = 'man-page-viewer'
    downloadSources = true
    sameSinceUntilBuild = false
    updateSinceUntilBuild = false
}